{% extends "base.html" %}

{% block title %}Dashboard{% endblock %}

{% block content %}

<div id="fb-root"></div>
<script async defer crossorigin="anonymous" src="https://connect.facebook.net/en_US/sdk.js#xfbml=1&version=v5.0&appId=1995587900553873&autoLogAppEvents=1"></script>


    <h2 class="main-title"> <center>Dashboard</center> </h2>
    <hr style="width:50%">
    <br/>
    <div class="card" class="main-card">
      <div class="card-body">
        <h4 class="card-title"><center>Your application status is: </center></h4>
        <div style="background-color:#e3e3e3; padding:5px;">
            <p class="card-text"><center style="font-size:20px;">
                <script>console.log("{{ confirmation }}");</script>
                {% if confirmation == "accepted" %}
                    CONFIRMED
                {% elif confirmation == "rejected" %}
                    DECLINED
                {% elif conirmation %}
                    UNCONFIRMED
                {% else %}
                    {% if app.app_complete %}
                        {% if app.accepted %}
                            ACCEPTED
                        {% elif app.waitlisted %}
                            WAITLISTED
                        {% elif app.rejected %}
                            REJECTED
                        {% else %}
                            COMPLETED, AWAITING APPROVAL
                        {% endif %}
                    {% else %}
                        INCOMPLETE
                    {% endif %}
                {% endif %}
                </center></p>
        </div>
        <p class="card-text" style="color:#212529;">
            <center><b>Application Deadline:</b> {{ submission_deadline }}</center>
            <center><b>Confirmation Deadline:</b> {{ confirmation_deadline }}</center>
                <br/>
                {% if not app.app_complete %}
                    <center>You still need to complete your application!</center>
                    <br/>
                    <center>If you do not complete your application before
                         {{ submission_deadline }},
                        you will not be considered for the admissions lottery!</center>
                        <br/>
                {% endif %}

                {% if confirmation == True %}
                    <center>You still need to complete your confirmation application!</center>
                    <br/>
                    <center>If you do not complete your confirmation before
                         {{ confirmation_deadline }},
                        your spot will be given up!</center>
                        <br/>
                {% endif %}
                </p>
                {% if confirmation == True or confirmation == "accepted" %}
                    <center><a href="/confirmation" class="btn btn-primary" style="background-color:#002868; border-color:#002868; color: white;">Go to Confirmation</a> <a href="" data-toggle="modal" data-target="#accountSettings" class="btn btn-primary" style="background-color:#002868; border-color:#002868; " id="accountSettingsButton">Account Settings</a></center>
                {% else %}
                    <center><a href="/application" class="btn btn-primary" style="background-color:#002868; border-color:#002868; color: white;">Go to Application</a>   <a href="" data-toggle="modal" data-target="#accountSettings" class="btn btn-primary" style="background-color:#002868; border-color:#002868; " id="accountSettingsButton">Account Settings</a></center>
                {% endif %}
      </div>
    </div>
    <br/>
    <br/>
    <br/>
    <div class="row">
        <div class="col-lg-4" id="facebook-feed">
            
        </div>
        <div class="col-lg-8">
            <a class="twitter-timeline" data-height="420" data-width="1000" data-theme="light" href="https://twitter.com/hoohacks?ref_src=twsrc%5Etfw">Tweets by hoohacks</a> <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>        </div>
    </div>


    <div class="modal" tabindex="-1" role="dialog" id="accountSettings">
        <div class="modal-dialog modal-lg" role="document">
          <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">User Settings</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                  <span aria-hidden="true">&times;</span>
                </button>
              </div>
            <div class="modal-body">
                <h5 style="text-align: center;">Change User Account Type</h5>
                <br/>
                <p style="color: black; text-align: center;">
                    Make me a: <a href="/make/mentor" class="btn btn-primary">Mentor</a> <a href="/make/judge" class="btn btn-primary">Judge</a> <a href="/make/volunteer" class="btn btn-primary">Volunteer</a> <a href="/make/admin" class="btn btn-primary">Admin</a>

                </p>
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
            </div>
          </div>
        </div>
      </div>
      

    <script>
        function setupFBFeed(){
            var fbFeed = document.getElementById('facebook-feed');
            var fbFeedWidth = fbFeed.clientWidth - 20;
            console.log(fbFeedWidth);
            fbFeed.innerHTML = '<div class="fb-group" data-href="https://www.facebook.com/groups/hoohacks2019/" data-width="' + fbFeedWidth.toString() + '" data-show-social-context="true" data-show-metadata="true"></div>'; 
        }
        $(document).ready(function (){
            setupFBFeed();
        });

    </script>

{% endblock %}
